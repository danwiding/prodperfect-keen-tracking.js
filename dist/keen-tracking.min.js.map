{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/keen-core/lib/utils/each.js","webpack:///./node_modules/keen-core/lib/utils/extend.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./lib/index.js","webpack:///./lib/helpers/getDomNodePath.js","webpack:///./lib/helpers/getWindowProfile.js","webpack:///./lib/helpers/getScreenProfile.js","webpack:///./lib/utils/deepExtend.js","webpack:///./lib/extend-events.js","webpack:///./lib/utils/queue.js","webpack:///./lib/utils/timer.js","webpack:///./lib/utils/serializeForm.js","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///./lib/utils/cookie.js","webpack:///./lib/helpers/getUniqueId.js","webpack:///./lib/helpers/getScrollState.js","webpack:///./lib/helpers/getDomNodeProfile.js","webpack:///./lib/helpers/getDomainName.js","webpack:///./lib/helpers/getDatetimeIndex.js","webpack:///./lib/helpers/getBrowserProfile.js","webpack:///./lib/browser-auto-tracking.js","webpack:///./lib/defer-events.js","webpack:///./node_modules/keen-core/lib/utils/base64.js","webpack:///./lib/record-events-browser.js","webpack:///./lib/utils/listener.js","webpack:///./node_modules/keen-core/lib/utils/serialize.js","webpack:///./node_modules/keen-core/lib/utils/parse-params.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/keen-core/lib/index.js","webpack:///./lib/browser.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","cb","Array","length","target","arguments","prop","Emitter","obj","key","mixin","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","removeListener","removeAllListeners","removeEventListener","callbacks","splice","emit","args","slice","len","listeners","hasListeners","_queue","KeenCore","helpers","client","extensions","events","collections","queue","recordDeferredEvents","writeKey","str","config","String","setGlobalProperties","props","log","globalProperties","getDomNodePath","el","nodeName","stack","parentNode","sibCount","sibIndex","childNodes","sib","hasAttribute","id","unshift","toLowerCase","join","getWindowProfile","body","html","output","document","documentElement","height","innerHeight","offsetHeight","width","innerWidth","offsetWidth","scrollHeight","Math","max","clientHeight","screen","ratio","availHeight","parseFloat","toFixed","availWidth","getScreenProfile","keys","orientation","angle","type","deepExtend","j","indexOf","_typeof","clone","undefined","input","JSON","parse","stringify","extendEvent","eventCollection","eventModifier","handleValidationError","extendEvents","eventsModifier","getExtendedEventBody","result","_each2","default","modifierResult","_deepExtend","_each","message","err","_componentEmitter","capacity","interval","timer","check","shouldFlushQueue","flush","pause","clearInterval","start","self","setInterval","num","count","clear","serializeForm","form","options","hash","serializer","hash_serializer","str_serialize","elements","radio_store","create","element","ignoreTypes","disabled","k_r_success_contrls","test","k_r_submitter","val","checked","empty","selectOptions","isSelectedOptions","option","allowedEmpty","hasValue","selected","brackets","match","hash_assign","shift","between","isArray","_values","string","index","isNaN","children","RegExp","exec","parse_keys","existing","replace","encodeURIComponent","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","extend","attributes","init","converter","api","path","defaults","expires","Date","setMilliseconds","getMilliseconds","e","write","decodeURIComponent","escape","cookie","toUTCString","domain","secure","cookies","split","rdecode","parts","charAt","read","json","set","getJSON","remove","withConverter","data","Cookies","enabled","_extend2","expire","daysUntilExpire","navigator","cookieEnabled","getUniqueId","random","v","toString","getScrollState","state","pixel","pixel_max","ratio_max","pageYOffset","scrollTop","Number","getScrollableArea","_extend","getDomNodeProfile","action","class","className","href","method","ng_click","getAttribute","ng_model","node_name","selector","_getDomNodePath","text","textContent","getTextContent","title","x_position","offsetLeft","clientLeft","y_position","offsetTop","clientTop","recordTextContent","redactTextContent","getDomainName","url","hostname","extractHostname","splitArr","arrLen","getDatetimeIndex","date","hour_of_day","getHours","day_of_week","parseInt","getDay","day_of_month","getDate","month","getMonth","year","getFullYear","getBrowserProfile","codeName","appCodeName","description","querySelector","content","getDocumentDescription","language","appName","online","onLine","platform","useragent","userAgent","version","appVersion","_getScreenProfile","_getWindowProfile","initAutoTrackingCore","lib","utils","ignoreDisabledFormFields","ignoreFormFieldTypes","recordClicks","recordFormSubmits","recordInputChanges","recordPageUnloads","recordPageViews","recordScrollState","shareUuidAcrossDomains","domElementOptions","now","uuid","domainName","location","cookieDomain","session_cookie","session_uuid","prodperfectTestData","scrollState","listener","tracker_loaded_at_time","toISOString","tracker_load_uuid_value","diff","browserProfile","iso_time_full","local_time_full","session","tracked_by","pkg","tracker_load_uuid","tracker_loaded_at","prodperfect_test_data","user","page","time_on_page","getTime","round","ip_address","geo","user_agent","tech","profile","full","info","referrer","time","local","utc","keen","timestamp","addons","ip","ua_string","date_time","scroll_state","recordEvent","serializerOptions","fields","x","_package","deferEvent","eventBody","deferEvents","eventsHash","eventList","concat","queueCapacity","queueInterval","clonedQueueConfig","clonedQueueEvents","recordEvents","res","unloadDeferredEvents","collection","map","encode","i1","i2","i3","e1","e2","e3","e4","utf8","charCodeAt","decode","c2","c3","cc","fromCharCode","addEvent","addEvents","_extendEvents","callback","asyncMode","getRequestUrl","getRequestUrlOkLength","extendedEventBody","isAsync","checkValidation","Keen","api_key","base64","modified","getUrlMaxLength","requestType","sendXhr","sendBeacon","beacon_url","img","createElement","onload","naturalHeight","naturalWidth","onerror","src","attemptPostXhr","script","parent","getElementsByTagName","callbackName","loaded","handleError","cleanup","removeChild","response","appendChild","onreadystatechange","readyState","xhr","getXhr","open","send","sendSynchronousXhr","extendedEventsHash","projectId","noXhrError","payload","status","responseText","setRequestHeader","toUpperCase","XMLHttpRequest","protocol","ActiveXObject","listenerCore","ctx","domListeners","eventType","attachEvent","addListener","evt","srcElement","handlers","elem","nodeList","querySelectorAll","matches","survivors","handler","each","query","urlParams","pl","search","g","Function","eval","global","env","previousKeen","parseParams","serialize","Client","configure","debug","isDefined","resources","legacyVersion","base","projects","queries","extendLibrary","source","previous","console","noConflict","ready","host","masterKey","baseUrl","arg","DOMContentLoaded","testDom","setTimeout","domReady","_listener","_recordEventsBrowser","_deferEvents","_browserAutoTracking","_getBrowserProfile","_getDatetimeIndex","_getDomainName","_getDomNodeProfile","_getScrollState","_getUniqueId","_cookie","_serializeForm","_timer","initAutoTracking","trackExternalLink","jsEvent","timeout","timeoutCallback","currentTarget","triggered","targetAttr","metaKey","submit","trigger","listenTo","listenerHash","elt","from","ceil","floor"],"mappings":"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","file":"keen-tracking.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n","module.exports = each;\n\nfunction each(o, cb, s){\n  var n;\n  if (!o){\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array){\n    // Indexed arrays, needed for Safari\n    for (n=0; n<o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false){\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o){\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","module.exports = extend;\n\nfunction extend(target){\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","import KeenCore from 'keen-core';\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\nimport { queue } from'./utils/queue';\n\nKeenCore.helpers = KeenCore.helpers || {};\n\n// Install internal queue\nKeenCore.on('client', function(client){\n  client.extensions = {\n    events: [],\n    collections: {}\n  };\n  client.queue = queue();\n  client.queue.on('flush', function(){\n    client.recordDeferredEvents();\n  });\n});\n\n// Accessors\nKeenCore.prototype.writeKey = function(str){\n  if (!arguments.length) return this.config.writeKey;\n  this.config.writeKey = (str ? String(str) : null);\n  return this;\n};\n\n// DEPRECATED\nKeenCore.prototype.setGlobalProperties = function(props){\n  KeenCore.log('This method has been deprecated. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events');\n  if (!props || typeof props !== 'function') {\n    this.emit('error', 'Invalid value for global properties: ' + props);\n    return;\n  }\n  this.config.globalProperties = props;\n  return this;\n};\n\nexport default KeenCore;\n","export function getDomNodePath(el){\n  if (!el.nodeName) return '';\n\n  var stack = [];\n  while ( el.parentNode != null ) {\n    // console.log(el.nodeName);\n    var sibCount = 0;\n    var sibIndex = 0;\n    for ( var i = 0; i < el.parentNode.childNodes.length; i++ ) {\n      var sib = el.parentNode.childNodes[i];\n      if ( sib.nodeName == el.nodeName ) {\n        if ( sib === el ) {\n          sibIndex = sibCount;\n        }\n        sibCount++;\n      }\n    }\n    if ( el.hasAttribute('id') && el.id != '' ) {\n      stack.unshift(el.nodeName.toLowerCase() + '#' + el.id);\n    } else if ( sibCount > 1 ) {\n      stack.unshift(el.nodeName.toLowerCase() + ':eq(' + sibIndex + ')');\n    } else {\n      stack.unshift(el.nodeName.toLowerCase());\n    }\n    el = el.parentNode;\n  }\n\n  return stack.slice(1).join(' > ');\n}\n\n\n// via: http://stackoverflow.com/a/16742828/2511985\n","export function getWindowProfile(){\n  var body, html, output;\n\n  if ('undefined' == typeof document) return {};\n\n  body = document.body;\n  html = document.documentElement;\n\n  output = {\n    'height': ('innerHeight' in window) ? window.innerHeight : document.documentElement.offsetHeight,\n    'width': ('innerWidth' in window) ? window.innerWidth : document.documentElement.offsetWidth,\n    'scrollHeight': Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight ) || null\n  };\n\n  if (window.screen) {\n    output.ratio = {\n      'height': (window.screen.availHeight) ? parseFloat( (window.innerHeight/window.screen.availHeight).toFixed(2) ) : null,\n      'width': (window.screen.availWidth) ? parseFloat( (window.innerWidth/window.screen.availWidth).toFixed(2) ) : null\n    };\n  }\n\n  return output;\n}\n\n/*\n  Notes:\n    document.documentElement.offsetHeight/Width is a workaround for IE8 and below, where window.innerHeight/Width is undefined\n*/\n","export function getScreenProfile(){\n  var keys, output;\n\n  if ('undefined' == typeof window || !window.screen) return {};\n\n  keys = ['height', 'width', 'colorDepth', 'pixelDepth', 'availHeight', 'availWidth'];\n  output = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    output[keys[i]] = window.screen[keys[i]] ? window.screen[keys[i]] : null;\n  }\n\n  output.orientation = {\n    'angle' : window.screen.orientation ? window.screen.orientation['angle'] : 0,\n    'type'  : window.innerWidth > window.innerHeight ? 'landscape': 'portrait'\n  };\n\n  return output;\n}\n","export const deepExtend = function(target){\n  for (var i = 1; i < arguments.length; i++) {\n    // Copy unique items from incoming array\n    if (target instanceof Array && arguments[i] instanceof Array) {\n      for (var j = 0; j < arguments[i].length; j++) {\n        if (target.indexOf(arguments[i][j]) < 0) {\n          target.push(arguments[i][j]);\n        }\n      }\n    }\n    // Blend objects\n    else {\n      for (var prop in arguments[i]){\n        // Recurse when both contain objects of same name\n        // and incoming is not a null object\n        if (typeof target[prop] !== 'undefined'\n          && typeof arguments[i][prop] === 'object'\n          && arguments[i][prop] !== null) {\n            deepExtend(target[prop], clone(arguments[i][prop]));\n        }\n        // Otherwise just copy it over...\n        else if (\n          arguments[i][prop] !== undefined &&\n          typeof arguments[i][prop] !== 'function') {\n            target[prop] = clone(arguments[i][prop]);\n        }\n      }\n    }\n  }\n  return target;\n}\n\nfunction clone(input){\n  return JSON.parse( JSON.stringify(input) );\n}\n","import { deepExtend } from './utils/deepExtend';\nimport each from 'keen-core/lib/utils/each';\n\nexport function extendEvent(eventCollection, eventModifier){\n  if (arguments.length !== 2 || typeof eventCollection !== 'string'\n    || ('object' !== typeof eventModifier && 'function' !== typeof eventModifier)) {\n      handleValidationError.call(this, 'Incorrect arguments provided to #extendEvent method');\n      return;\n  }\n  this.extensions.collections[eventCollection] = this.extensions.collections[eventCollection] || [];\n  this.extensions.collections[eventCollection].push(eventModifier);\n  this.emit('extendEvent', eventCollection, eventModifier);\n  return this;\n}\n\nexport function extendEvents(eventsModifier){\n  if (arguments.length !== 1 || ('object' !== typeof eventsModifier && 'function' !== typeof eventsModifier)) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #extendEvents method');\n    return;\n  }\n  this.extensions.events.push(eventsModifier);\n  this.emit('extendEvents', eventsModifier);\n  return this;\n}\n\nfunction handleValidationError(message){\n  var err = 'Event(s) not extended: ' + message;\n  this.emit('error', err);\n}\n\nexport function getExtendedEventBody(result, queue){\n  if (queue && queue.length > 0) {\n    each(queue, function(eventModifier, i){\n      var modifierResult = (typeof eventModifier === 'function') ? eventModifier() : eventModifier;\n      deepExtend(result, modifierResult);\n    });\n  }\n  return result;\n}\n","import Emitter from 'component-emitter';\n\nexport function queue() {\n  if (this instanceof queue === false) {\n    return new queue();\n  }\n  this.capacity = 0;\n  this.config = {\n    capacity: 5000,\n    interval: 15\n  };\n  this.events = {\n    // \"collection-1\": [],\n    // \"collection-2\": []\n  };\n  this.interval = 0;\n  this.timer = null;\n  return this;\n}\n\nEmitter(queue.prototype);\n\nqueue.prototype.check = function() {\n  if (shouldFlushQueue(this)) {\n    this.flush();\n  }\n  if (this.config.interval === 0 || this.capacity === 0) {\n    this.pause();\n  }\n  return this;\n};\n\nqueue.prototype.flush = function() {\n  this.emit('flush');\n  this.interval = 0;\n  return this;\n};\n\nqueue.prototype.pause = function() {\n  if (this.timer) {\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n  return this;\n};\n\nqueue.prototype.start = function() {\n  var self = this;\n  self.pause();\n  self.timer = setInterval(function() {\n    self.interval++;\n    self.check();\n  }, 1000);\n  return self;\n};\n\nfunction shouldFlushQueue(props) {\n  if (props.capacity > 0 && props.interval >= props.config.interval) {\n    return true;\n  }\n  else if (props.capacity >= props.config.capacity) {\n    return true;\n  }\n  return false;\n}\n","export function timer(num){\n  if (this instanceof timer === false) {\n    return new timer(num);\n  }\n  this.count = num || 0;\n  return this;\n}\n\ntimer.prototype.start = function(){\n  var self = this;\n  this.pause();\n  this.interval = setInterval(function(){\n    self.count++;\n  }, 1000);\n  return this;\n};\n\ntimer.prototype.pause = function(){\n  clearInterval(this.interval);\n  return this;\n};\n\ntimer.prototype.value = function(){\n  return this.count;\n};\n\ntimer.prototype.clear = function(){\n  this.count = 0;\n  return this;\n};\n","/*\n  This is a modified copy of https://github.com/defunctzombie/form-serialize/ v0.7.1\n  Includes a new configuration option:\n    * ignoreTypes - Array, Default: [], Example: [ 'password' ]\n*/\n\n// types which indicate a submit action and are not successful controls\n// these will be ignored\nvar k_r_submitter = /^(?:submit|button|image|reset|file)$/i;\n\n// node names which could be successful controls\nvar k_r_success_contrls = /^(?:input|select|textarea|keygen)/i;\n\n// Matches bracket notation.\nvar brackets = /(\\[[^\\[\\]]*\\])/g;\n\n// serializes form fields\n// @param form MUST be an HTMLForm element\n// @param options is an optional argument to configure the serialization. Default output\n// with no options specified is a url encoded string\n//    - hash: [true | false] Configure the output type. If true, the output will\n//    be a js object.\n//    - serializer: [function] Optional serializer function to override the default one.\n//    The function takes 3 arguments (result, key, value) and should return new result\n//    hash and url encoded str serializers are provided with this module\n//    - disabled: [true | false]. If true serialize disabled fields.\n//    - empty: [true | false]. If true serialize empty fields\nexport function serializeForm(form, options) {\n  if (typeof options != 'object') {\n    options = { hash: !!options };\n  }\n  else if (options.hash === undefined) {\n    options.hash = true;\n  }\n\n  var result = (options.hash) ? {} : '';\n  var serializer = options.serializer || ((options.hash) ? hash_serializer : str_serialize);\n\n  var elements = form && form.elements ? form.elements : [];\n\n  // Object store each radio and set if it's empty or not\n  var radio_store = Object.create(null);\n\n  for (var i=0 ; i<elements.length ; ++i) {\n    var element = elements[i];\n\n    // NEW: Skip ignored field types\n    if (options.ignoreTypes && options.ignoreTypes.indexOf(element.type) > -1) {\n      continue;\n    }\n    // ingore disabled fields\n    if ((!options.disabled && element.disabled) || !element.name) {\n      continue;\n    }\n    // ignore anyhting that is not considered a success field\n    if (!k_r_success_contrls.test(element.nodeName) ||\n      k_r_submitter.test(element.type)) {\n      continue;\n    }\n\n    var key = element.name;\n    var val = element.value;\n\n    // we can't just use element.value for checkboxes cause some browsers lie to us\n    // they say \"on\" for value when the box isn't checked\n    if ((element.type === 'checkbox' || element.type === 'radio') && !element.checked) {\n      val = undefined;\n    }\n\n    // If we want empty elements\n    if (options.empty) {\n      if (element.type === 'checkbox' && !element.checked) {\n        val = '';\n      }\n\n      // for radio\n      if (element.type === 'radio') {\n        if (!radio_store[element.name] && !element.checked) {\n          radio_store[element.name] = false;\n        }\n        else if (element.checked) {\n          radio_store[element.name] = true;\n        }\n      }\n\n      // if options empty is true, continue only if its radio\n      if (val == undefined && element.type == 'radio') {\n        continue;\n      }\n    }\n    else {\n      // value-less fields are ignored unless options.empty is true\n      if (!val) {\n        continue;\n      }\n    }\n\n    // multi select boxes\n    if (element.type === 'select-multiple') {\n      val = [];\n\n      var selectOptions = element.options;\n      var isSelectedOptions = false;\n      for (var j=0 ; j<selectOptions.length ; ++j) {\n        var option = selectOptions[j];\n        var allowedEmpty = options.empty && !option.value;\n        var hasValue = (option.value || allowedEmpty);\n        if (option.selected && hasValue) {\n          isSelectedOptions = true;\n\n          // If using a hash serializer be sure to add the\n          // correct notation for an array in the multi-select\n          // context. Here the name attribute on the select element\n          // might be missing the trailing bracket pair. Both names\n          // \"foo\" and \"foo[]\" should be arrays.\n          if (options.hash && key.slice(key.length - 2) !== '[]') {\n            result = serializer(result, key + '[]', option.value);\n          }\n          else {\n            result = serializer(result, key, option.value);\n          }\n        }\n      }\n\n      if (!isSelectedOptions && options.empty) {\n        result = serializer(result, key, '');\n      }\n      continue;\n    }\n\n    result = serializer(result, key, val);\n  }\n\n  if (options.empty) {\n    for (var key in radio_store) {\n      if (!radio_store[key]) {\n        result = serializer(result, key, '');\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction parse_keys(string) {\n  var keys = [];\n  var prefix = /^([^\\[\\]]*)/;\n  var children = new RegExp(brackets);\n  var match = prefix.exec(string);\n\n  if (match[1]) {\n      keys.push(match[1]);\n  }\n\n  while ((match = children.exec(string)) !== null) {\n      keys.push(match[1]);\n  }\n\n  return keys;\n}\n\nfunction hash_assign(result, keys, value) {\n  if (keys.length === 0) {\n    result = value;\n    return result;\n  }\n\n  var key = keys.shift();\n  var between = key.match(/^\\[(.+?)\\]$/);\n\n  if (key === '[]') {\n    result = result || [];\n\n    if (Array.isArray(result)) {\n      result.push(hash_assign(null, keys, value));\n    }\n    else {\n      // This might be the result of bad name attributes like \"[][foo]\",\n      // in this case the original `result` object will already be\n      // assigned to an object literal. Rather than coerce the object to\n      // an array, or cause an exception the attribute \"_values\" is\n      // assigned as an array.\n      result._values = result._values || [];\n      result._values.push(hash_assign(null, keys, value));\n    }\n\n    return result;\n  }\n\n  // Key is an attribute name and can be assigned directly.\n  if (!between) {\n    result[key] = hash_assign(result[key], keys, value);\n  }\n  else {\n    var string = between[1];\n    // +var converts the variable into a number\n    // better than parseInt because it doesn't truncate away trailing\n    // letters and actually fails if whole thing is not a number\n    var index = +string;\n\n    // If the characters between the brackets is not a number it is an\n    // attribute name and can be assigned directly.\n    if (isNaN(index)) {\n      result = result || {};\n      result[string] = hash_assign(result[string], keys, value);\n    }\n    else {\n      result = result || [];\n      result[index] = hash_assign(result[index], keys, value);\n    }\n  }\n\n  return result;\n}\n\n// Object/hash encoding serializer.\nfunction hash_serializer(result, key, value) {\n  var matches = key.match(brackets);\n\n  // Has brackets? Use the recursive assignment function to walk the keys,\n  // construct any missing objects in the result tree and make the assignment\n  // at the end of the chain.\n  if (matches) {\n    var keys = parse_keys(key);\n    hash_assign(result, keys, value);\n  }\n  else {\n    // Non bracket notation can make assignments directly.\n    var existing = result[key];\n\n    // If the value has been assigned already (for instance when a radio and\n    // a checkbox have the same name attribute) convert the previous value\n    // into an array before pushing into it.\n    //\n    // NOTE: If this requirement were removed all hash creation and\n    // assignment could go through `hash_assign`.\n    if (existing) {\n      if (!Array.isArray(existing)) {\n        result[key] = [ existing ];\n      }\n\n      result[key].push(value);\n    }\n    else {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\n\n// urlform encoding serializer\nfunction str_serialize(result, key, value) {\n  // encode newlines as \\r\\n cause the html spec says so\n  value = value.replace(/(\\r)?\\n/g, '\\r\\n');\n  value = encodeURIComponent(value);\n\n  // spaces should be '+' rather than '%20'.\n  value = value.replace(/%20/g, '+');\n  return result + (result ? '&' : '') + encodeURIComponent(key) + '=' + value;\n}\n","/*!\n * JavaScript Cookie v2.1.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\tvar _OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = _OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires && '; expires=' + attributes.expires.toUTCString(), // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path    && '; path=' + attributes.path,\n\t\t\t\t\tattributes.domain  && '; domain=' + attributes.domain,\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.get = api.set = api;\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","import Cookies from 'js-cookie';\nimport extend from 'keen-core/lib/utils/extend';\n\nexport const cookie = function(str){\n  if (!arguments.length) return;\n  if (this instanceof cookie === false) {\n    return new cookie(str);\n  }\n\n  this.config = {\n    key: str,\n    options: {\n      expires: 365\n    }\n  };\n  this.data = this.get();\n  return this;\n}\n\ncookie.prototype.get = function(str){\n  var data = {};\n\n  if (Cookies.get(this.config.key)) {\n    data = Cookies.getJSON(this.config.key);\n  }\n  if (str && typeof data === 'object' && typeof data !== null) {\n    return (typeof data[str] !== 'undefined') ? data[str] : null;\n  }\n  else {\n    return data;\n  }\n};\n\ncookie.prototype.set = function(str, value, options){\n  if (!arguments.length || !this.enabled()) return this;\n  if (typeof str === 'string' && arguments.length >= 2) {\n    this.data[str] = value ? value : null;\n  }\n  else if (typeof str === 'object' && arguments.length === 1) {\n    extend(this.data, str);\n  }\n  Cookies.set(\n    this.config.key,\n    this.data,\n    extend(this.config.options, options || {})\n  );\n  return this;\n};\n\ncookie.prototype.expire = function(daysUntilExpire){\n  if (daysUntilExpire) {\n    Cookies.set(\n      this.config.key,\n      this.data,\n      extend(this.config.options, { expires: daysUntilExpire })\n    );\n  } else {\n    Cookies.remove(this.config.key);\n    this.data = {};\n  }\n  return this;\n};\n\ncookie.prototype.options = function(obj){\n  if (!arguments.length) return this.config.options;\n  this.config.options = (typeof obj === 'object') ? obj : {};\n  return this;\n};\n\ncookie.prototype.enabled = function(){\n  return navigator.cookieEnabled;\n};\n","// via: http://stackoverflow.com/a/2117523/2511985\n\nexport function getUniqueId(){\n  var str = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n  return str.replace(/[xy]/g, function(c) {\n    var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n    return v.toString(16);\n  });\n}\n","import extend from 'keen-core/lib/utils/extend';\n\nexport function getScrollState(obj){\n  var config = typeof obj === 'object' ? obj : {};\n  var state = extend({\n    pixel: 0,\n    pixel_max: 0,\n    ratio: null,\n    ratio_max: null\n  }, config);\n\n  if (typeof window !== undefined || typeof document !== undefined) {\n    state.pixel = getScrollOffset() + getWindowHeight();\n    if (state.pixel > state.pixel_max) {\n      state.pixel_max = state.pixel;\n    }\n    state.ratio = parseFloat(Number(state.pixel / getScrollableArea()).toFixed(2));\n    state.ratio_max = parseFloat(Number(state.pixel_max / getScrollableArea()).toFixed(2));\n  }\n\n  return state;\n}\n\nfunction getScrollableArea() {\n  var body = document.body;\n  var html = document.documentElement;\n  return Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight ) || null;\n}\n\nfunction getScrollOffset() {\n  return (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\n}\n\nfunction getWindowHeight() {\n  return window.innerHeight || document.documentElement.clientHeight;\n}\n","import { getDomNodePath } from './getDomNodePath';\n\nconst getTextContent = (el, options) => {\n  if(!options.recordTextContent || !el.textContent) {\n    return null;\n  }\n\n  if(options.redactTextContent) {\n    return '---REDACTED---';\n  }\n\n  return el.textContent;\n}\n\nexport function getDomNodeProfile(el, options = {}) {\n  return {\n    action: el.action,\n    class: el.className,\n    href: el.href || null,\n    id: el.id,\n    method: el.method,\n    name: el.name,\n    ng_click: el.getAttribute('ng-click'),\n    ng_model: el.getAttribute('ng-model'),\n    node_name: el.nodeName,\n    selector: getDomNodePath(el),\n    text: el.text,\n    textContent: getTextContent(el, options),\n    title: el.title,\n    type: el.type,\n    x_position: el.offsetLeft || el.clientLeft || null,\n    y_position: el.offsetTop || el.clientTop || null\n  };\n}\n","function extractHostname(url) {\n    var hostname;\n    //find & remove protocol (http, ftp, etc.) and get hostname\n\n    if (url.indexOf(\"://\") > -1) {\n        hostname = url.split('/')[2];\n    }\n    else {\n        hostname = url.split('/')[0];\n    }\n\n    //find & remove port number\n    hostname = hostname.split(':')[0];\n    //find & remove \"?\"\n    hostname = hostname.split('?')[0];\n\n    return hostname;\n}\n\n// To address those who want the \"root domain,\" use this function:\nexport function getDomainName(url) {\n    var domain = extractHostname(url),\n        splitArr = domain.split('.'),\n        arrLen = splitArr.length;\n\n    //extracting the root domain here\n    //if there is a subdomain\n    if (arrLen > 2) {\n        domain = splitArr[arrLen - 2] + '.' + splitArr[arrLen - 1];\n        //check to see if it's using a Country Code Top Level Domain (ccTLD) (i.e. \".me.uk\")\n        if (splitArr[arrLen - 2].length == 2 && splitArr[arrLen - 1].length == 2) {\n            //this is using a ccTLD\n            domain = splitArr[arrLen - 3] + '.' + domain;\n        }\n    }\n    return domain;\n}\n","export function getDatetimeIndex(input){\n  var date = input || new Date();\n  return {\n    'hour_of_day'  : date.getHours(),\n    'day_of_week'  : parseInt( 1 + date.getDay() ),\n    'day_of_month' : date.getDate(),\n    'month'        : parseInt( 1 + date.getMonth() ),\n    'year'         : date.getFullYear()\n  };\n}\n","import { getScreenProfile } from './getScreenProfile';\nimport { getWindowProfile } from './getWindowProfile';\n\nexport function getBrowserProfile() {\n  return {\n    'cookies'    : ('undefined' !== typeof navigator.cookieEnabled) ? navigator.cookieEnabled : false,\n    'codeName'   : navigator.appCodeName,\n    'description': getDocumentDescription(),\n    'language'   : navigator.language,\n    'name'       : navigator.appName,\n    'online'     : navigator.onLine,\n    'platform'   : navigator.platform,\n    'useragent'  : navigator.userAgent,\n    'version'    : navigator.appVersion,\n    'screen'     : getScreenProfile(),\n    'window'     : getWindowProfile()\n  }\n}\n\nfunction getDocumentDescription() {\n  var el;\n  if (document && typeof document.querySelector === 'function') {\n    el = document.querySelector('meta[name=\"description\"]');\n  }\n  return el ? el.content : '';\n}\n","import pkg from '../package.json';\n\nexport function initAutoTrackingCore(lib) {\n  return function(obj) {\n    var client = this;\n    var helpers = lib.helpers;\n    var utils = lib.utils;\n\n    var options = utils.extend({\n      ignoreDisabledFormFields: false,\n      ignoreFormFieldTypes: ['password'],\n      recordClicks: true,\n      recordFormSubmits: true,\n      recordInputChanges: false,\n      recordPageUnloads: false,\n      recordPageViews: true,\n      recordScrollState: true,\n      shareUuidAcrossDomains: false\n    }, obj);\n\n    const defaultDomElementOptions = {\n      recordTextContent: true,\n      redactTextContent: true\n    }\n    options.domElementOptions = utils.extend(defaultDomElementOptions, obj.domElementOptions);\n\n    var now = new Date();\n\n    var cookie = new utils.cookie('keen');\n    var uuid = cookie.get('uuid');\n    if (!uuid) {\n      uuid = helpers.getUniqueId();\n      var domainName = helpers.getDomainName(window.location.hostname);\n      var cookieDomain = domainName && options.shareUuidAcrossDomains ? {\n        domain: '.' + domainName\n      } : {};\n      cookie.set('uuid', uuid, cookieDomain);\n    }\n\n    var session_cookie = new utils.cookie('prodperfect_session');\n    var session_uuid = session_cookie.get('session_uuid');\n    if (!session_uuid) {\n      session_uuid = helpers.getUniqueId();\n    }\n    session_cookie.set('session_uuid', session_uuid);\n    session_cookie.expire(1/48);\n\n    var prodperfectTestData = new utils.cookie('prodperfect_test').get('test_run_data');\n\n    var scrollState = {};\n    if (options.recordScrollState) {\n      scrollState = helpers.getScrollState();\n      utils.listener('window').on('scroll', function(){\n        scrollState = helpers.getScrollState(scrollState);\n      });\n    }\n\n    var tracker_loaded_at_time = now.toISOString();\n    var tracker_load_uuid_value = helpers.getUniqueId();\n\n    client.extendEvents(function() {\n      var browserProfile = helpers.getBrowserProfile();\n      return {\n        iso_time_full: new Date().toISOString(),\n        local_time_full: new Date().toString(),\n        session: {\n          session_uuid: session_uuid\n        },\n        tracked_by: pkg.name + '-' + pkg.version,\n        tracker_load_uuid: tracker_load_uuid_value,\n        tracker_loaded_at: tracker_loaded_at_time,\n        prodperfect_test_data: prodperfectTestData,\n        user: {\n          uuid: uuid\n        },\n        page: {\n          title: document ? document.title : null,\n          description: browserProfile.description,\n          time_on_page: getSecondsSinceDate(now)\n        },\n\n        ip_address: '${keen.ip}',\n        geo: { /* Enriched */ },\n\n        user_agent: '${keen.user_agent}',\n        tech: {\n          profile: browserProfile\n          /* Enriched */\n        },\n\n        url: {\n          full: window ? window.location.href : '',\n          info: { /* Enriched */ }\n        },\n\n        referrer: {\n          full: document ? document.referrer : '',\n          info: { /* Enriched */ }\n        },\n\n        time: {\n          local: { /* Enriched */ },\n          utc: { /* Enriched */ }\n        },\n\n        keen: {\n          timestamp: new Date().toISOString(),\n          addons: [\n            {\n              name: 'keen:ip_to_geo',\n              input: {\n                ip: 'ip_address'\n              },\n              output : 'geo'\n            },\n            {\n              name: 'keen:ua_parser',\n              input: {\n                ua_string: 'user_agent'\n              },\n              output: 'tech'\n            },\n            {\n              name: 'keen:url_parser',\n              input: {\n                url: 'url.full'\n              },\n              output: 'url.info'\n            },\n            {\n              name: 'keen:url_parser',\n              input: {\n                url: 'referrer.full'\n              },\n              output: 'referrer.info'\n            },\n            {\n              name: 'keen:date_time_parser',\n              input: {\n                date_time: 'keen.timestamp'\n              },\n              output: 'time.utc'\n            },\n            {\n              name: 'keen:date_time_parser',\n              input: {\n                date_time: 'iso_time_full'\n              },\n              output: 'time.local'\n            }\n          ],\n        }\n      };\n    });\n\n\n\n    if (options.recordClicks === true) {\n      utils.listener('*').on('click', function(e) {\n        var el = e.target;\n        var props = {\n          element: helpers.getDomNodeProfile(el, options.domElementOptions),\n          page: {\n            scroll_state: scrollState\n          }\n        };\n        client.recordEvent('clicks', props);\n      });\n    }\n\n    if (options.recordFormSubmits === true) {\n      utils.listener('form').on('submit', function(e) {\n        var el = e.target;\n        var serializerOptions = {\n          disabled: options.ignoreDisabledFormFields,\n          ignoreTypes: options.ignoreFormFieldTypes\n        };\n        var fields = utils.serializeForm(el, serializerOptions);\n        var keys = Object.keys(fields);\n        for (var x = 0; x < keys.length; x++) {\n          fields[keys[x]] = '---REDACTED---';\n        }\n        var props = {\n          form: {\n            action: el.action,\n            fields: fields,\n            method: el.method\n          },\n          element: helpers.getDomNodeProfile(el, options.domElementOptions),\n          page: {\n            scroll_state: scrollState\n          }\n        };\n        client.recordEvent('form_submissions', props);\n      });\n    }\n\n    if (options.recordInputChanges === true) {\n      utils.listener('*').on('change', function (e) {\n        var el = e.target;\n        var props = {\n          element: helpers.getDomNodeProfile(el, options.domElementOptions),\n          page: {\n            scroll_state: helpers.getScrollState\n          }\n        };\n        client.recordEvent('changes', props);\n      });\n    }\n\n    if (options.recordPageUnloads === true && window.addEventListener) {\n      window.addEventListener('beforeunload', function (e) {\n        client.recordEvent('pageunloads');\n      }, false);\n    }\n\n    if (options.recordPageViews === true) {\n      client.recordEvent('pageviews');\n    }\n\n    return client;\n  };\n}\n\nfunction getSecondsSinceDate(date) {\n  var diff = new Date().getTime() - date.getTime();\n  return Math.round(diff / 1000);\n}\n","import Keen from './index';\nimport each from 'keen-core/lib/utils/each';\nimport { queue } from './utils/queue';\n\nexport function deferEvent(eventCollection, eventBody){\n\n  if (arguments.length !== 2 || typeof eventCollection !== 'string') {\n    handleValidationError.call(this, 'Incorrect arguments provided to #deferEvent method');\n    return;\n  }\n\n  this.queue.events[eventCollection] = this.queue.events[eventCollection] || [];\n  this.queue.events[eventCollection].push(eventBody);\n  this.queue.capacity++;\n  if (!this.queue.timer) {\n    this.queue.start();\n  }\n  this.emit('deferEvent', eventCollection, eventBody);\n  return this;\n}\n\nexport function deferEvents(eventsHash){\n  var self = this;\n\n  if (arguments.length !== 1 || typeof eventsHash !== 'object') {\n    handleValidationError.call(this, 'Incorrect arguments provided to #deferEvents method');\n    return;\n  }\n\n  each(eventsHash, function(eventList, eventCollection){\n    self.queue.events[eventCollection] = self.queue.events[eventCollection] || [];\n    self.queue.events[eventCollection] = self.queue.events[eventCollection].concat(eventList);\n    self.queue.capacity = self.queue.capacity + eventList.length;\n    if (!self.queue.timer) {\n      self.queue.start();\n    }\n  });\n  self.emit('deferEvents', eventsHash);\n  return self;\n}\n\nexport function queueCapacity(num){\n  if (!arguments.length) return this.queue.config.capacity;\n  this.queue.config.capacity = num ? Number(num): 0;\n  this.queue.check();\n  return this;\n}\n\nexport function queueInterval(num){\n  if (!arguments.length) return this.queue.config.interval;\n  this.queue.config.interval = num ? Number(num): 0;\n  this.queue.check();\n  return this;\n}\n\nexport function recordDeferredEvents(){\n  var self = this,\n      clonedQueueConfig,\n      clonedQueueEvents;\n\n  if (self.queue.capacity > 0) {\n    self.queue.pause();\n    clonedQueueConfig = JSON.parse(JSON.stringify(self.queue.config));\n    clonedQueueEvents = JSON.parse(JSON.stringify(self.queue.events));\n    self.queue = queue();\n    self.queue.config = clonedQueueConfig;\n    self.queue.on('flush', function(){\n      self.recordDeferredEvents();\n    });\n    self.emit('recordDeferredEvents', clonedQueueEvents);\n    self.recordEvents(clonedQueueEvents, function(err, res){\n      if (err) {\n        // Retry once\n        self.recordEvents(clonedQueueEvents);\n      }\n      else {\n        clonedQueueEvents = undefined;\n      }\n    });\n  }\n  return self;\n}\n\nexport function unloadDeferredEvents(){\n  self.queue.pause();\n  each(self.queue.events, function(events, collection){\n    self.recordEvent(collection, events);\n  });\n}\n\nfunction handleValidationError(message){\n  var err = 'Event(s) not deferred: ' + message;\n  this.emit('error', err);\n}\n","module.exports = {\n  map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n  encode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, i1, i2, i3, e1, e2, e3, e4;\n    n = this.utf8.encode(n);\n    while (i < n.length) {\n      i1 = n.charCodeAt(i++); i2 = n.charCodeAt(i++); i3 = n.charCodeAt(i++);\n      e1 = (i1 >> 2); e2 = (((i1 & 3) << 4) | (i2 >> 4)); e3 = (isNaN(i2) ? 64 : ((i2 & 15) << 2) | (i3 >> 6));\n      e4 = (isNaN(i2) || isNaN(i3)) ? 64 : i3 & 63;\n      o = o + m.charAt(e1) + m.charAt(e2) + m.charAt(e3) + m.charAt(e4);\n    } return o;\n  },\n  decode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, cc = String.fromCharCode, e1, e2, e3, e4, c1, c2, c3;\n    n = n.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n    while (i < n.length) {\n      e1 = m.indexOf(n.charAt(i++)); e2 = m.indexOf(n.charAt(i++));\n      e3 = m.indexOf(n.charAt(i++)); e4 = m.indexOf(n.charAt(i++));\n      c1 = (e1 << 2) | (e2 >> 4); c2 = ((e2 & 15) << 4) | (e3 >> 2);\n      c3 = ((e3 & 3) << 6) | e4;\n      o = o + (cc(c1) + ((e3 != 64) ? cc(c2) : \"\")) + (((e4 != 64) ? cc(c3) : \"\"));\n    } return this.utf8.decode(o);\n  },\n  utf8: {\n    encode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i++); o = o + ((c < 128) ? cc(c) : ((c > 127) && (c < 2048)) ?\n        (cc((c >> 6) | 192) + cc((c & 63) | 128)) : (cc((c >> 12) | 224) + cc(((c >> 6) & 63) | 128) + cc((c & 63) | 128)));\n        } return o;\n    },\n    decode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c2, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i);\n        o = o + ((c < 128) ? [cc(c), i++][0] : ((c > 191) && (c < 224)) ?\n        [cc(((c & 31) << 6) | ((c2 = n.charCodeAt(i + 1)) & 63)), (i += 2)][0] :\n        [cc(((c & 15) << 12) | (((c2 = n.charCodeAt(i + 1)) & 63) << 6) | ((c3 = n.charCodeAt(i + 2)) & 63)), (i += 3)][0]);\n      } return o;\n    }\n  }\n};\n","import Keen from './index';\nimport base64 from 'keen-core/lib/utils/base64';\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\nimport { getExtendedEventBody } from './extend-events';\n\n// ------------------------------\n// .recordEvent\n// ------------------------------\n\nexport function recordEvent(eventCollection, eventBody, callback, asyncMode){\n  var url, data, cb, getRequestUrl, getRequestUrlOkLength, extendedEventBody, isAsync;\n\n  url = this.url('events', encodeURIComponent(eventCollection));\n  data = {};\n  cb = callback;\n\n  // Requests are asynchronous by default\n  isAsync = ('boolean' === typeof asyncMode) ? asyncMode : true;\n\n  if (!checkValidation.call(this, cb)) {\n    return;\n  }\n\n  if (!eventCollection || typeof eventCollection !== 'string') {\n    handleValidationError.call(this, 'Collection name must be a string.', cb);\n    return;\n  }\n\n  // ------------------------------\n  // DEPRECATED\n  // Apply client.globalProperties\n  // ------------------------------\n  if (this.config.globalProperties) {\n    data = this.config.globalProperties(eventCollection);\n  }\n  extend(data, eventBody);\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  extendedEventBody = {};\n  getExtendedEventBody(extendedEventBody, this.extensions.events);\n  getExtendedEventBody(extendedEventBody, this.extensions.collections[eventCollection]);\n  getExtendedEventBody(extendedEventBody, [data]);\n\n  this.emit('recordEvent', eventCollection, extendedEventBody);\n\n  if (!Keen.enabled) {\n    handleValidationError.call(this, 'Keen.enabled is set to false.', cb);\n    return false;\n  }\n\n  // ------------------------------\n  // Send event\n  // ------------------------------\n\n  getRequestUrl = this.url('events', encodeURIComponent(eventCollection), {\n    api_key  : this.writeKey(),\n    data     : encodeURIComponent( base64.encode( JSON.stringify(extendedEventBody) ) ),\n    modified : new Date().getTime()\n  });\n  getRequestUrlOkLength = getRequestUrl.length < getUrlMaxLength();\n\n  if (isAsync) {\n    switch (this.config.requestType) {\n      case 'xhr':\n        sendXhr.call(this, 'POST', url, extendedEventBody, cb);\n        break;\n      case 'beacon':\n        if (navigator.sendBeacon) {\n          var beacon_url = this.url('events', encodeURIComponent(eventCollection),{ api_key: this.writeKey()});\n          navigator.sendBeacon(beacon_url, JSON.stringify(extendedEventBody));\n        }\n        else if (getRequestUrlOkLength) {\n            sendBeacon.call(this, getRequestUrl, cb);\n        }\n        else {\n          attemptPostXhr.call(this, url, extendedEventBody,\n              'Beacon URL length exceeds current browser limit, and XHR is not supported.', cb)\n        }\n        break;\n      default:\n        if (getRequestUrlOkLength) {\n          sendJSONp.call(this, getRequestUrl, cb);\n        }\n        else {\n          attemptPostXhr.call(this, url, extendedEventBody,\n              'JSONp URL length exceeds current browser limit, and XHR is not supported.', cb)\n        }\n        break;\n    }\n  }\n  else {\n    // Send synchronous request\n    if (getRequestUrlOkLength) {\n      sendSynchronousXhr(getRequestUrl);\n    }\n  }\n\n  callback = cb = null;\n  return this;\n}\n\n// ------------------------------\n// .recordEvents\n// ------------------------------\n\nexport function recordEvents(eventsHash, callback){\n  var self = this, url, cb, extendedEventsHash;\n\n  url = this.url('events');\n  cb = callback;\n  callback = null;\n\n  if (!checkValidation.call(this, cb)) {\n    return;\n  }\n\n  if ('object' !== typeof eventsHash || eventsHash instanceof Array) {\n    handleValidationError.call(this, 'First argument must be an object', cb);\n    return;\n  }\n\n  if (arguments.length > 2) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #recordEvents method', cb);\n    return;\n  }\n\n  // ------------------------------\n  // DEPRECATED\n  // Apply client.globalProperties\n  // ------------------------------\n  if (this.config.globalProperties) {\n    // Loop over each set of events\n    each(eventsHash, function(events, collection){\n      // Loop over each individual event\n      each(events, function(body, index){\n        // Start with global properties for this collection\n        var modified = self.config.globalProperties(collection);\n        // Apply provided properties for this event body\n        eventsHash[collection][index] = extend(modified, body);\n      });\n    });\n  }\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  extendedEventsHash = {};\n  each(eventsHash, function(eventList, eventCollection){\n    // Find or create collection on new hash\n    extendedEventsHash[eventCollection] = extendedEventsHash[eventCollection] || [];\n    // Loop over each eventBody in the existing hash\n    each(eventList, function(eventBody, index){\n      // Create a new data object\n      var extendedEventBody = {};\n      // Process \"events\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.events);\n      // Process \"collection\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.collections[eventCollection]);\n      // Blend existing eventBody data into the result\n      getExtendedEventBody(extendedEventBody, [eventBody]);\n      // Push extendedEventBody into new hash\n      extendedEventsHash[eventCollection].push(extendedEventBody);\n    });\n  });\n\n  this.emit('recordEvents', extendedEventsHash);\n\n  if (!Keen.enabled) {\n    handleValidationError.call(this, 'Keen.enabled is set to false.', cb);\n    return false;\n  }\n\n  if (getXhr()) {\n    sendXhr.call(this, 'POST', url, extendedEventsHash, cb);\n  }\n  else {\n    // each(eventsHash, function(eventArray, eventCollection){\n    //    ... send each individually?\n    // });\n  }\n\n  callback = cb = null;\n  return this;\n}\n\n\n// ----------------------\n// DEPRECATED\n// ----------------------\n\nexport function addEvent(){\n  this.emit('error', 'This method has been deprecated. Check out #recordEvent: https://github.com/keen/keen-tracking.js#record-a-single-event');\n  recordEvent.apply(this, arguments);\n}\n\nexport function addEvents(){\n  this.emit('error', 'This method has been deprecated. Check out #recordEvents: https://github.com/keen/keen-tracking.js#record-multiple-events');\n  recordEvents.apply(this, arguments);\n}\n\n\n// ------------------------------\n// Validation\n// ------------------------------\n\nfunction checkValidation(callback){\n  var cb = callback;\n  callback = null;\n\n  if (!this.projectId()) {\n    handleValidationError.call(this, 'Keen.Client is missing a projectId property.', cb);\n    return false;\n  }\n  if (!this.writeKey()) {\n    handleValidationError.call(this, 'Keen.Client is missing a writeKey property.', cb);\n    return false;\n  }\n  return true;\n}\n\nfunction handleValidationError(message, cb){\n  var err = 'Event(s) not recorded: ' + message;\n  this.emit('error', err);\n  if (cb) {\n    cb.call(this, err, null);\n    cb = null;\n  }\n}\n\nfunction getUrlMaxLength(){\n  if ('undefined' !== typeof window && navigator) {\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {\n      return 2000;\n    }\n  }\n  return 16000;\n}\n\n\n// ------------------------------\n// XHR Requests\n// ------------------------------\n\nfunction attemptPostXhr(url, data, noXhrError, callback) {\n  if (getXhr()) {\n    sendXhr.call(this, 'POST', url, data, callback);\n  }\n  else {\n    handleValidationError.call(this, noXhrError);\n  }\n}\n\nfunction sendXhr(method, url, data, callback){\n  var self = this;\n  var payload;\n  var xhr = getXhr();\n  var cb = callback;\n  callback = null;\n\n  xhr.onreadystatechange = function() {\n    var response;\n    if (xhr.readyState == 4) {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        try {\n          response = JSON.parse( xhr.responseText );\n        } catch (e) {\n          Keen.emit('error', 'Could not parse HTTP response: ' + xhr.responseText);\n          if (cb) {\n            cb.call(self, xhr, null);\n          }\n        }\n        if (cb && response) {\n          cb.call(self, null, response);\n        }\n      }\n      else {\n        Keen.emit('error', 'HTTP request failed.');\n        if (cb) {\n          cb.call(self, xhr, null);\n        }\n      }\n    }\n  };\n\n  xhr.open(method, url, true);\n  xhr.setRequestHeader('Authorization', self.writeKey());\n  xhr.setRequestHeader('Content-Type', 'application/json');\n\n  if (data) {\n    payload = JSON.stringify(data);\n  }\n\n  if (method.toUpperCase() === 'GET') {\n    xhr.send();\n  }\n  if (method.toUpperCase() === 'POST') {\n    xhr.send(payload);\n  }\n\n}\n\nfunction sendSynchronousXhr(url){\n  var xhr = getXhr();\n  if (xhr) {\n    xhr.open('GET', url, false);\n    xhr.send(null);\n  }\n}\n\nfunction getXhr() {\n  // yay, superagent!\n  var root = 'undefined' == typeof window ? this : window;\n  if (root.XMLHttpRequest && ('file:' != root.location.protocol || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  return false;\n};\n\n\n// ------------------------------\n// JSON-P Requests\n// ------------------------------\n\nfunction sendJSONp(url, callback){\n  var self = this,\n      cb = callback,\n      timestamp = new Date().getTime(),\n      script = document.createElement('script'),\n      parent = document.getElementsByTagName('head')[0],\n      callbackName = 'keenJSONPCallback',\n      loaded = false;\n\n  callback = null;\n\n  callbackName += timestamp;\n  while (callbackName in window) {\n    callbackName += 'a';\n  }\n  window[callbackName] = function(response) {\n    if (loaded === true) return;\n    loaded = true;\n    if (cb) {\n      cb.call(self, null, response);\n    }\n    cleanup();\n  };\n  script.src = url + '&jsonp=' + callbackName;\n  parent.appendChild(script);\n\n  // for early IE w/ no onerror event\n  script.onreadystatechange = function() {\n    if (loaded === false && this.readyState === 'loaded') {\n      loaded = true;\n      handleError();\n      cleanup();\n    }\n  };\n  // non-ie, etc\n  script.onerror = function() {\n    // on IE9 both onerror and onreadystatechange are called\n    if (loaded === false) {\n      loaded = true;\n      handleError();\n      cleanup();\n    }\n  };\n\n  function handleError(){\n    if (cb) {\n      cb.call(self, 'An error occurred!', null);\n    }\n  }\n\n  function cleanup(){\n    window[callbackName] = undefined;\n    try {\n      delete window[callbackName];\n    } catch(e){};\n    parent.removeChild(script);\n  }\n\n}\n\n\n// ------------------------------\n// Image Beacon Requests\n// ------------------------------\n\nfunction sendBeacon(url, callback){\n  var self = this,\n      cb = callback,\n      img = document.createElement('img'),\n      loaded = false;\n\n  callback = null;\n\n  img.onload = function() {\n    loaded = true;\n    if ('naturalHeight' in this) {\n      if (this.naturalHeight + this.naturalWidth === 0) {\n        this.onerror();\n        return;\n      }\n    } else if (this.width + this.height === 0) {\n      this.onerror();\n      return;\n    }\n    if (cb) {\n      cb.call(self);\n    }\n  };\n  img.onerror = function() {\n    loaded = true;\n    if (cb) {\n      cb.call(self, 'An error occurred!', null);\n    }\n  };\n  img.src = url + '&c=clv1';\n}\n","import Emitter from 'component-emitter';\nimport each from 'keen-core/lib/utils/each';\n/*\n\n  // Create a new element listner\n  var myClickerCatcher = Keen.utils.listener(\".nav li > a\");\n\n  // Listen for a given event\n  myClicker.on(\"click\", function(e){\n    // do stuff!\n  });\n\n  // Listen for event once\n  myClicker.once(\"click\", function(e){ });\n\n  // Cancel a given event listener\n  myClicker.off(\"click\");\n\n  // Cancel all event listners\n  myClicker.off();\n\n*/\n\nexport const listenerCore = function(ctx){\n\n  // Make sure this object exists\n  ctx.domListeners = ctx.domListeners || {\n    /*\n    'click': {\n      '.nav li > a': [fn, fn, fn]\n    }\n    */\n  };\n\n  function listener(str){\n    if (!str) return;\n    if (this instanceof listener === false) {\n      return new listener(str);\n    }\n    this.selector = str;\n    return this;\n  }\n\n  listener.prototype.on = function(str, fn){\n    var self = this;\n\n    if (arguments.length !== 2 || 'string' !== typeof str || 'function' !== typeof fn) return this;\n\n    // Set each listener on a parent dictionary, indexed by event:\n    if ('undefined' === typeof ctx.domListeners[str]) {\n      addListener(str, eventHandler(str));\n      ctx.domListeners[str] = {};\n    }\n    ctx.domListeners[str][self.selector] = ctx.domListeners[str][self.selector] || [];\n    ctx.domListeners[str][self.selector].push(fn);\n    return self;\n  };\n\n  listener.prototype.once = function(str, fn){\n    var self = this;\n    function on() {\n      self.off(str, on);\n      return fn.apply(self, arguments);\n    }\n    on.fn = fn;\n    self.on(str, on);\n    return self;\n  };\n\n  listener.prototype.off = function(str, fn){\n    var self = this, survivors = [];\n    if (arguments.length === 2) {\n      each(ctx.domListeners[str][self.selector], function(handler, i){\n        if (handler === fn || handler.fn === fn) return;\n        survivors.push(handler);\n      });\n      ctx.domListeners[str][self.selector] = survivors;\n    }\n    else if (arguments.length === 1) {\n      try {\n        delete ctx.domListeners[str][self.selector];\n      }\n      catch(e){\n        ctx.domListeners[str][self.selector] = [];\n      }\n    }\n    else {\n      // loop over every eventType and delete handlers\n      each(ctx.domListeners, function(hash, eventType){\n        // if ('undefined' === typeof hash[str]) return;\n        try {\n          delete ctx.domListeners[eventType][self.selector];\n        }\n        catch(e){\n          ctx.domListeners[eventType][self.selector] = function(){};\n        }\n      });\n    }\n    return self;\n  };\n\n  function eventHandler(eventType){\n    return function(e){\n      var evt, target;\n\n      evt = e || window.event;\n      target = evt.target || evt.srcElement;\n\n      // If nothing assigned to this event type, let it go\n      if ('undefined' === ctx.domListeners[eventType]) return;\n\n      each(ctx.domListeners[eventType], function(handlers, key){\n\n        if (matches(target, key)) {\n          // Call all handlers for this eventType + node\n          each(handlers, function(fn, i){\n            // if ('click' === eventType && 'A' === target.nodeName) {\n            //   deferClickEvent(evt, target, fn);\n            // }\n            // else if ('submit' === eventType && 'FORM' === target.nodeName) {\n            //   deferFormSubmit(evt, target, fn);\n            // }\n            // else {\n              fn(evt);\n            // }\n          });\n        }\n        else if ('window' === key) {\n          // Call all handlers\n          each(handlers, function(fn, i){\n            fn(evt);\n          });\n        }\n        return;\n      });\n    };\n  }\n\n  return listener;\n}\n\n\n// ------------------------------\n// Attach global event listener\n// ------------------------------\n\nfunction addListener(eventType, fn){\n  if (document.addEventListener) {\n    document.addEventListener(eventType, fn, false);\n  } else {\n    document.attachEvent(\"on\" + eventType, fn);\n  }\n}\n\n\n// ------------------------------\n// Match DOM element to selector\n// ------------------------------\n\nfunction matches(elem, selector) {\n  // We'll use querySelectorAll to find all element matching the selector,\n  // then check if the given element is included in that list.\n  // Executing the query on the parentNode reduces the resulting nodeList,\n  // document doesn't have a parentNode, though.\n  var nodeList = ( elem.parentNode || document ).querySelectorAll( selector ) || [],\n      i = nodeList.length;\n\n  // loop on the nodeList\n  while ( i-- ) {\n    if ( nodeList[i] == elem ) { return true; }\n  }\n  return false;\n}\n\n\n// ------------------------------\n// Handle 'click' events (A)\n// ------------------------------\n\nfunction deferClickEvent(evt, anchor, callback){\n  var timeout = 500,\n      targetAttr,\n      cbResponse;\n\n  // Get 'target' attribute from anchor\n  if (anchor.getAttribute !== void 0) {\n    targetAttr = anchor.getAttribute(\"target\");\n  } else if (anchor.target) {\n    targetAttr = anchor.target;\n  }\n\n  // Fire listener and catch possible response (return false)\n  cbResponse = callback(evt);\n\n  // If prevented within callback, bail:\n  if (('boolean' === typeof cbResponse && cbResponse === false) || evt.defaultPrevented || evt.returnValue === false) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    return false;\n  }\n  // Else if anchor doesn't kick off a new window or tab.. defer and replay the event:\n  else if (targetAttr !== '_blank' && targetAttr !== 'blank' && !evt.metaKey && !anchor.hasAttribute('download')) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    if (\n      anchor.href\n      && anchor.href !== '#'\n      && anchor.href !== (window.location + '#')\n    ) {\n      setTimeout(function(){\n        window.location = anchor.href;\n      }, timeout);\n    }\n  }\n\n  return false;\n}\n\n\n// ------------------------------\n// Handle 'submit' events (FORM)\n// ------------------------------\n\nfunction deferFormSubmit(evt, form, callback){\n  var timeout = 500;\n\n  // Fire listener and catch possible response (return false)\n  var cbResponse = callback(evt);\n\n  // If prevented within callback, bail\n  if (('boolean' === typeof cbResponse && cbResponse === false) || evt.defaultPrevented || evt.returnValue === false) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    return false;\n  }\n  // Defer and replay event\n  else {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    setTimeout(function(){\n      form.submit();\n    }, timeout);\n  }\n\n  return false;\n}\n","var each = require('./each'),\n    extend = require('./extend');\n\nmodule.exports = serialize;\n\nfunction serialize(data){\n  var query = [];\n  each(data, function(value, key){\n    if ('string' !== typeof value) {\n      value = JSON.stringify(value);\n    }\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n  return query.join('&');\n}\n","module.exports = parseParams;\n\nfunction parseParams(str){\n  // via: http://stackoverflow.com/a/2880929/2511985\n  var urlParams = {},\n      match,\n      pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n      search = /([^&=]+)=?([^&]*)/g,\n      decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\n      query  = str.split(\"?\")[1];\n\n  while (!!(match=search.exec(query))) {\n    urlParams[decode(match[1])] = decode(match[2]);\n  }\n  return urlParams;\n};\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","(function(env){\n  var previousKeen = env.Keen || undefined;\n  var each = require('./utils/each'),\n      extend = require('./utils/extend'),\n      parseParams = require('./utils/parse-params'),\n      serialize = require('./utils/serialize');\n\n  var Emitter = require('component-emitter');\n\n  function Client(props){\n    if (this instanceof Client === false) {\n      return new Client(props);\n    }\n    this.configure(props);\n\n    // Set up event handling\n    if (Client.debug) {\n      this.on('error', Client.log);\n    }\n    this.emit('ready');\n    Client.emit('client', this);\n  }\n\n  if (previousKeen && typeof previousKeen.resources === 'undefined') {\n    Client.legacyVersion = previousKeen;\n  }\n\n  Emitter(Client);\n  Emitter(Client.prototype);\n\n  extend(Client, {\n    debug: false,\n    enabled: true,\n    loaded: false,\n    version: '__VERSION__'\n  });\n\n  // Set or extend helpers\n  Client.helpers = Client.helpers || {};\n\n  // Set or extend resources\n  Client.resources = Client.resources || {};\n  extend(Client.resources, {\n    'base'      : '{protocol}://{host}',\n    'version'   : '{protocol}://{host}/3.0',\n    'projects'  : '{protocol}://{host}/3.0/projects',\n    'projectId' : '{protocol}://{host}/3.0/projects/{projectId}',\n    'events'    : '{protocol}://{host}/3.0/projects/{projectId}/events',\n    'queries'   : '{protocol}://{host}/3.0/projects/{projectId}/queries'\n  });\n\n  // Set or extend utils\n  Client.utils = Client.utils || {};\n  extend(Client.utils, {\n    'each'        : each,\n    'extend'      : extend,\n    'parseParams' : parseParams,\n    'serialize'   : serialize\n  });\n\n  Client.extendLibrary = function(target, source) {\n    var previous = previousKeen || source;\n    if (isDefined(previous) && isDefined(previous.resources)) {\n      each(previous, function(value, key) {\n        if (typeof value === 'object') {\n          target[key] = target[key] || {};\n          extend(target[key], value);\n        }\n        else {\n          target[key] = target[key] || value;\n        }\n      });\n      extend(target.prototype, previous.prototype);\n    }\n    return target;\n  };\n\n  Client.log = function(str){\n    if (Client.debug && typeof console === 'object') {\n      console.log('[Keen]', str);\n    }\n  };\n\n  Client.noConflict = function(){\n    if (typeof env.Keen !== 'undefined') {\n      env.Keen = Client.legacyVersion || previousKeen;\n    }\n    return Client;\n  };\n\n  Client.ready = function(fn){\n    if (Client.loaded) {\n      fn();\n    }\n    else {\n      Client.once('ready', fn);\n    }\n  };\n\n  Client.prototype.configure = function(obj){\n    var config = obj || {};\n    this.config = this.config || {\n      projectId    : undefined,\n      writeKey     : undefined,\n      host         : 'api.keen.io',\n      protocol     : 'https',\n      requestType  : 'jsonp',\n      resources    : extend({}, Client.resources)\n    };\n\n    // IE<10 request shim\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1) {\n      config.protocol = document.location.protocol.replace(':', '');\n    }\n\n    if (config.host) {\n      config.host.replace(/.*?:\\/\\//g, '');\n    }\n\n    extend(this.config, config);\n    return this;\n  };\n\n  Client.prototype.masterKey = function(str){\n    if (!arguments.length) return this.config.masterKey;\n    this.config.masterKey = str ? String(str) : null;\n    return this;\n  };\n\n  Client.prototype.projectId = function(str){\n    if (!arguments.length) return this.config.projectId;\n    this.config.projectId = (str ? String(str) : null);\n    return this;\n  };\n\n  Client.prototype.resources = function(obj){\n    if (!arguments.length) return this.config.resources;\n    var self = this;\n    if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.config.resources[key] = (value ? value : null);\n      });\n    }\n    return self;\n  };\n\n  Client.prototype.url = function(name){\n    var args = Array.prototype.slice.call(arguments, 1),\n        baseUrl = this.config.resources.base || '{protocol}://{host}',\n        path;\n\n    if (name && typeof name === 'string') {\n      if (this.config.resources[name]) {\n        path = this.config.resources[name];\n      }\n      else {\n        path = baseUrl + name;\n      }\n    }\n    else {\n      path = baseUrl;\n    }\n\n    each(this.config, function(value, key){\n      if (typeof value !== 'object') {\n        path = path.replace('{' + key + '}', value);\n      }\n    });\n\n    each(args, function(arg, i){\n      if (typeof arg === 'string') {\n        path += '/' + arg;\n      }\n      else if (typeof arg === 'object') {\n        path += '?';\n        each(arg, function(value, key){\n          path += key + '=' + value + '&';\n        });\n        path = path.slice(0, -1);\n      }\n    });\n\n    return path;\n  };\n\n  domReady(function(){\n    Client.loaded = true;\n    Client.emit('ready');\n  });\n\n  function domReady(fn){\n    if (Client.loaded || typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    // Firefox 3.5 shim\n    if(document.readyState == null && document.addEventListener){\n      document.addEventListener('DOMContentLoaded', function DOMContentLoaded(){\n        document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n        document.readyState = 'complete';\n      }, false);\n      document.readyState = 'loading';\n    }\n    testDom(fn);\n  }\n\n  function testDom(fn){\n    if (/in/.test(document.readyState)) {\n      setTimeout(function(){\n        testDom(fn);\n      }, 9);\n    }\n    else {\n      fn();\n    }\n  }\n\n  function isDefined(target) {\n    return typeof target !== 'undefined';\n  }\n\n  function isUndefined(target) {\n    return typeof target === 'undefined';\n  }\n\n  module.exports = Client;\n\n}).call(this, typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {});\n","import KeenCore from './index';\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\nimport { listenerCore } from './utils/listener';\nimport {\n  recordEvent,\n  recordEvents,\n  addEvent,\n  addEvents\n} from './record-events-browser';\nimport {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents\n} from './defer-events';\nimport { extendEvent, extendEvents } from './extend-events';\nimport { initAutoTrackingCore } from './browser-auto-tracking';\nimport { getBrowserProfile } from './helpers/getBrowserProfile';\nimport { getDatetimeIndex } from './helpers/getDatetimeIndex';\nimport { getDomainName } from './helpers/getDomainName';\nimport { getDomNodePath } from './helpers/getDomNodePath';\nimport { getDomNodeProfile } from './helpers/getDomNodeProfile';\nimport { getScreenProfile } from './helpers/getScreenProfile';\nimport { getScrollState } from './helpers/getScrollState';\nimport { getUniqueId } from './helpers/getUniqueId';\nimport { getWindowProfile } from './helpers/getWindowProfile';\nimport { cookie } from './utils/cookie';\nimport { deepExtend } from './utils/deepExtend';\nimport { serializeForm } from './utils/serializeForm';\nimport { timer } from './utils/timer';\n\n  // ------------------------\n  // Methods\n  // ------------------------\n  extend(KeenCore.prototype, {\n    recordEvent,\n    recordEvents,\n    addEvent,\n    addEvents\n  });\n  extend(KeenCore.prototype, {\n    deferEvent,\n    deferEvents,\n    queueCapacity,\n    queueInterval,\n    recordDeferredEvents\n  });\n  extend(KeenCore.prototype, {\n    extendEvent,\n    extendEvents\n  });\n\n  // ------------------------\n  // Auto-Tracking\n  // ------------------------\n  const initAutoTracking = initAutoTrackingCore(KeenCore);\n  extend(KeenCore.prototype, {\n    initAutoTracking\n  });\n\n  // ------------------------\n  // Deprecated\n  // ------------------------\n  KeenCore.prototype.trackExternalLink = trackExternalLink;\n\n  // ------------------------\n  // Helpers\n  // ------------------------\n  extend(KeenCore.helpers, {\n    getBrowserProfile,\n    getDatetimeIndex,\n    getDomainName,\n    getDomNodePath,\n    getDomNodeProfile,\n    getScreenProfile,\n    getScrollState,\n    getUniqueId,\n    getWindowProfile\n  });\n\n  // ------------------------\n  // Utils\n  // ------------------------\n  const listener = listenerCore(KeenCore);\n  extend(KeenCore.utils, {\n    cookie,\n    deepExtend,\n    listener,\n    serializeForm,\n    timer\n  });\n\n  KeenCore.listenTo = function(listenerHash){\n    each(listenerHash, function(callback, key){\n      var split = key.split(' ');\n      var eventType = split[0],\n          selector = split.slice(1, split.length).join(' ');\n      // Create an unassigned listener\n      return listener(selector).on(eventType, callback);\n    });\n  };\n\n  // ------------------------------\n  // DEPRECATED\n  // Apply client.globalProperties\n  // ------------------------------\n  function trackExternalLink(jsEvent, eventCollection, payload, timeout, timeoutCallback){\n    this.emit('error', 'This method has been deprecated. Check out DOM listeners: https://github.com/keen/keen-tracking.js#listeners');\n    var evt = jsEvent,\n      target = (evt.currentTarget) ? evt.currentTarget : (evt.srcElement || evt.target),\n      timer = timeout || 500,\n      triggered = false,\n      targetAttr = '',\n      callback,\n      win;\n    if (target.getAttribute !== void 0) {\n      targetAttr = target.getAttribute('target');\n    } else if (target.target) {\n      targetAttr = target.target;\n    }\n    if ((targetAttr == '_blank' || targetAttr == 'blank') && !evt.metaKey) {\n      win = window.open('about:blank');\n      win.document.location = target.href;\n    }\n    if (target.nodeName === 'A') {\n      callback = function(){\n        if(!triggered && !evt.metaKey && (targetAttr !== '_blank' && targetAttr !== 'blank')){\n          triggered = true;\n          window.location = target.href;\n        }\n      };\n    }\n    else if (target.nodeName === 'FORM') {\n      callback = function(){\n        if(!triggered){\n          triggered = true;\n          target.submit();\n        }\n      };\n    }\n    else {\n      this.trigger('error', '#trackExternalLink method not attached to an <a> or <form> DOM element');\n    }\n    if (timeoutCallback) {\n      callback = function(){\n        if(!triggered){\n          triggered = true;\n          timeoutCallback();\n        }\n      };\n    }\n    this.recordEvent(eventCollection, payload, callback);\n    setTimeout(callback, timer);\n    if (!evt.metaKey) {\n      return false;\n    }\n  }\n\n  // IE-specific polyfills, yay!\n  // -----------------------------\n  if (!Array.prototype.indexOf){\n    Array.prototype.indexOf = function(elt /*, from*/) {\n      var len = this.length >>> 0;\n\n      var from = Number(arguments[1]) || 0;\n      from = (from < 0)\n           ? Math.ceil(from)\n           : Math.floor(from);\n      if (from < 0)\n        from += len;\n\n      for (; from < len; from++) {\n        if (from in this &&\n            this[from] === elt)\n          return from;\n      }\n      return -1;\n    };\n  }\n\nexport const Keen = KeenCore.extendLibrary(KeenCore);\nexport default Keen;\n"],"sourceRoot":""}